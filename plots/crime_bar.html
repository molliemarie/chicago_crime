<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3: A bar chart with divs</title>
		<script src="https://d3js.org/d3.v4.min.js"></script>
		<style type="text/css">
		
/*			div.bar {
				display: inline-block;
				width: 20px;
				height: 75px;	 Gets overriden by D3-assigned height below 
				margin-right: 2px;
				background-color: teal;
			}*/
		
		</style>
	</head>
	<body>
		<script type="text/javascript">

		var margin = {top: 20, right: 50, bottom: 70, left: 40};

		var w = 600 - margin.left - margin.right,
			h = 400 - margin.top - margin.bottom
			barPadding = 1;

		var dataset;


		// var yScale = d3.scaleLinear()
		// 			   .range([h, 0]);

		// var xScale = d3.scaleBand()
		// 			   .padding([.1])

		d3.csv("crime_count_by_year_2016.csv", function(data) {
			dataset = data;
			console.log(dataset);

			var yScale = d3.scaleLinear()
						   .domain([0, d3.max(dataset, function(d) { return parseInt(d.count); })])
						   .range([0, h])

			var xScale = d3.scaleLinear()
						   .domain([0, dataset.length])
						   .range([margin.left, w]);
						   // .padding(0;.5);

			var ordinal = [0, dataset.length]
			console.log([0,w])
			console.log(xScale(20))


			var max = d3.max(dataset, function(d) { return parseInt(d.count); })
			// console.log(max)

			var svg = d3.select("body")
			            .append("svg")
			            .attr("width", w)
			            .attr("height", h);

			var yAxis = d3.axisLeft()
						  .scale(yScale)
						  .ticks(5);

			svg.selectAll("rect")
			   .data(dataset)
			   .enter()
			   .append("rect")
			   .attr("x", function(d, i) {
			   	return xScale(i);
			   })
			   .attr("y", function(d){
			   	return h - yScale(d.count);
			   })
			   .attr("width", w / dataset.length - barPadding)
			   .attr("height", function(d) {
			   	return yScale(d.count);
			   });

			svg.append("g")
			   .attr("class", "y axis")
			   .attr("transform", "translate(" + margin.left + ",0)")
			   .call(yAxis);
		});

			
		</script>
	</body>
</html>